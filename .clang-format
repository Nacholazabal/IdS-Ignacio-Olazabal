---
# Personalized C style for embedded projects
# Base + overrides from your preferences
Language:        Cpp
BasedOnStyle:    LLVM

# === Indentation ===
IndentWidth:     4
TabWidth:        4
UseTab:          Never
ContinuationIndentWidth: 4

# === Line length ===
ColumnLimit:     100

# === Braces ===
BreakBeforeBraces: Custom
BraceWrapping:
  AfterFunction: true          # Allman for function definitions
  AfterControlStatement: false # K&R (Attach) for if/for/while/switch
  AfterEnum: false
  AfterStruct: false
  AfterUnion: false
  BeforeElse: false
  SplitEmptyFunction: true
  SplitEmptyRecord: true
  SplitEmptyNamespace: true

# === Short statements on one line ===
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false
AllowShortFunctionsOnASingleLine: None
AllowShortBlocksOnASingleLine: false
AllowShortCaseLabelsOnASingleLine: false

# === Spacing ===
SpacesInParentheses:            false
SpacesInSquareBrackets:         false
SpacesInAngles:                 false
SpaceBeforeParens:              ControlStatements  # if (x) but foo(x)
SpaceInEmptyParentheses:        false
SpaceAfterCStyleCast:           true
SpacesBeforeTrailingComments:   2

# === Pointers & references ===
DerivePointerAlignment: false
PointerAlignment: Left          # int *p;

# === Alignment ===
AlignAfterOpenBracket: Align
AlignOperands:   true
AlignTrailingComments: true
AlignConsecutiveAssignments: AcrossEmptyLinesAndComments
AlignConsecutiveDeclarations: None
AlignConsecutiveMacros: AcrossEmptyLinesAndComments
AlignEscapedNewlines: Left

# === Wrapping of calls/params ===
BinPackArguments:  false
BinPackParameters: false
AlwaysBreakBeforeMultilineStrings: true
AllowAllParametersOfDeclarationOnNextLine: true

# === Includes: grouped & alphabetic ===
# Group order: C standard -> external <...> -> project "local"
SortIncludes: true
IncludeBlocks: Regroup
IncludeCategories:
  - Regex: '^(<|")?(assert\.h|complex\.h|ctype\.h|errno\.h|fenv\.h|float\.h|inttypes\.h|iso646\.h|limits\.h|locale\.h|math\.h|setjmp\.h|signal\.h|stdalign\.h|stdarg\.h|stdatomic\.h|stdbool\.h|stddef\.h|stdint\.h|stdio\.h|stdlib\.h|stdnoreturn\.h|string\.h|tgmath\.h|threads\.h|time\.h|uchar\.h|wchar\.h|wctype\.h)(>|")?$'
    Priority: 1
  - Regex: '^<.*>$'       # other external system/SDK headers
    Priority: 2
  - Regex: '^".*"$'       # project-local headers
    Priority: 3

# === Misc ===
KeepEmptyLinesAtTheStartOfBlocks: false
FixNamespaceComments: false
ReflowComments: true
SortUsingDeclarations: false
...
